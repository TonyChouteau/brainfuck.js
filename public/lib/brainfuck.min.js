!function(){function t(i,s){s=s||{},this.code=i,this.memorySize=s.memorySize||t.MEMORY_SIZE,this.ascii=s.ascii||!1,this.inputs=(s.inputs||[]).reverse(),this.init()}t.MEMORY_SIZE=100,t.A_CODE=97,t.ARRAY=0,t.STRING=1,t.prototype={init:function(){this.makeContext()},makeContext:function(){this.raw=this.code,Array.isArray(this.code)?(this.type=t.ARRAY,this.data=this.code.filter((t=>" "!==t||"\n"!==t||"\t"!==t))):(this.type=t.STRING,this.data=this.code.replaceAll(" ","").replaceAll("\n","").replaceAll("\t","")),this.dataCursor=0,this.loops=[],this.out=this.ascii?"":[],this.cursor=0,this.memory=Array.from({length:Math.max(this.memorySize,1)},(t=>0)),this.commands={"<":this.left.bind(this),">":this.right.bind(this),"+":this.add.bind(this),"-":this.minus.bind(this),".":this.put.bind(this),",":this.get.bind(this),"[":this.loop.bind(this),"]":this.goto.bind(this)}},left:function(){if(!(this.cursor>0))throw new Error("Index "+(this.cursor-1)+"is out of memory.");this.cursor--},right:function(){if(!(this.cursor<this.memory.length-1))throw new Error("Index "+(this.cursor+1)+"is out of memory.");this.cursor++},add:function(){this.memory[this.cursor]++},minus:function(){this.memory[this.cursor]--},put:function(){this.ascii?this.out+=String.fromCharCode(this.memory[this.cursor]):this.out.push(this.memory[this.cursor])},get:function(){if(this.inputs.length>0)this.memory[this.cursor]=this.inputs.pop();else{let t=null;for(;null===t||isNaN(t);)t=+prompt();this.memory[this.cursor]=t}},loop:function(){if(this.memory[this.cursor]>0)this.loops.push(this.dataCursor);else{let t=0;for(this.dataCursor++;("]"!==this.data[this.dataCursor]||t>0)&&this.dataCursor<this.data.length;)"["===this.data[this.dataCursor]?t++:"]"===this.data[this.dataCursor]&&t--,this.dataCursor++}},goto:function(){if(0===this.loops.length)throw new Error("Unexpected character ], no [ found before.");this.memory[this.cursor]>0?this.dataCursor=this.loops[this.loops.length-1]:this.loops.pop()},run:function(t){for(;this.dataCursor<this.data.length;)t&&this.view(),this.commands[this.data[this.dataCursor]](),this.dataCursor++;return t&&this.view(),this},view:function(){return console.log(this.memory,this.cursor),this},print:function(){this.ascii?console.log(this.out):console.log(this.out.join(","))}},window.brainfuck=(i,s)=>new t(i,s)}();
